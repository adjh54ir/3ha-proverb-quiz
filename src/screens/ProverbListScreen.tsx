import React, { useCallback, useEffect, useRef, useState } from 'react';
import {
	View,
	Text,
	StyleSheet,
	TextInput,
	RefreshControl,
	TouchableOpacity,
	Keyboard,
	TouchableWithoutFeedback,
	FlatList,
	Modal,
	ScrollView,
	Alert,
	KeyboardAvoidingView,
	Platform,
} from 'react-native';
import { useFocusEffect } from '@react-navigation/native';
import Icon from 'react-native-vector-icons/FontAwesome6';
import DropDownPicker from 'react-native-dropdown-picker';
import ProverbServices from '@/services/ProverbServices';
import { MainDataType } from '@/types/MainDataType';
import FastImage from 'react-native-fast-image';
import AdmobBannerAd from './common/ads/AdmobBannerAd';
import { SafeAreaView } from 'react-native-safe-area-context';
import IconComponent from './common/atomic/IconComponent';

const PAGE_SIZE = 30;

const COMMON_ALL_OPTION = {
	label: 'Ï†ÑÏ≤¥',
	value: 'Ï†ÑÏ≤¥',
	icon: () => <IconComponent type='FontAwesome6' name='clipboard-list' size={16} color='#555' />,
};

const LEVEL_DROPDOWN_ITEMS = [
	COMMON_ALL_OPTION,
	{
		label: 'ÏïÑÏ£º Ïâ¨ÏõÄ',
		value: 'ÏïÑÏ£º Ïâ¨ÏõÄ',
		icon: () => <IconComponent type='FontAwesome6' name='seedling' size={16} color='#85C1E9' />,
	},
	{
		label: 'Ïâ¨ÏõÄ',
		value: 'Ïâ¨ÏõÄ',
		icon: () => <IconComponent type='FontAwesome6' name='leaf' size={16} color='#F4D03F' />,
	},
	{
		label: 'Î≥¥ÌÜµ',
		value: 'Î≥¥ÌÜµ',
		icon: () => <IconComponent type='FontAwesome6' name='tree' size={16} color='#EB984E' />,
	},
	{
		label: 'Ïñ¥Î†§ÏõÄ',
		value: 'Ïñ¥Î†§ÏõÄ',
		icon: () => <IconComponent type='FontAwesome6' name='trophy' size={16} color='#E74C3C' />,
	},
];
const FIELD_DROPDOWN_ITEMS = [
	COMMON_ALL_OPTION,
	{
		label: 'Ïö¥/Ïö∞Ïó∞',
		value: 'Ïö¥/Ïö∞Ïó∞',
		icon: () => <IconComponent type='FontAwesome6' name='dice' size={16} color='#81ecec' />,
	},
	{
		label: 'Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ',
		value: 'Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ',
		icon: () => <IconComponent type='FontAwesome6' name='users' size={16} color='#a29bfe' />,
	},
	{
		label: 'ÏÑ∏ÏÉÅ Ïù¥Ïπò',
		value: 'ÏÑ∏ÏÉÅ Ïù¥Ïπò',
		icon: () => <IconComponent type='fontawesome5' name='globe' size={16} color='#fdcb6e' />,
	},
	{
		label: 'Í∑ºÎ©¥/Í≤ÄÏÜå',
		value: 'Í∑ºÎ©¥/Í≤ÄÏÜå',
		icon: () => <IconComponent type='fontawesome5' name='hammer' size={16} color='#fab1a0' />,
	},
	{
		label: 'ÎÖ∏Î†•/ÏÑ±Í≥µ',
		value: 'ÎÖ∏Î†•/ÏÑ±Í≥µ',
		icon: () => <IconComponent type='fontawesome5' name='medal' size={16} color='#55efc4' />,
	},
	{
		label: 'Í≤ΩÍ≥Ñ/Ï°∞Ïã¨',
		value: 'Í≤ΩÍ≥Ñ/Ï°∞Ïã¨',
		icon: () => <IconComponent type='fontawesome5' name='exclamation-triangle' size={16} color='#ff7675' />,
	},
	{
		label: 'ÏöïÏã¨/ÌÉêÏöï',
		value: 'ÏöïÏã¨/ÌÉêÏöï',
		icon: () => <IconComponent type='fontawesome5' name='hand-holding-usd' size={16} color='#fd79a8' />,
	},
	{
		label: 'Î∞∞Ïã†/Î∂àÏã†',
		value: 'Î∞∞Ïã†/Î∂àÏã†',
		icon: () => <IconComponent type='fontawesome5' name='user-slash' size={16} color='#b2bec3' />,
	},
];

const ProverbListScreen = () => {
	const scrollRef = useRef<FlatList>(null);
	const searchInputRef = useRef<TextInput>(null);

	const emptyImage = require('@/assets/images/emptyList.png');
	const [refreshing, setRefreshing] = useState(false);
	const [keyword, setKeyword] = useState('');
	const [proverbList, setProverbList] = useState(ProverbServices.selectProverbList());
	const [visibleList, setVisibleList] = useState<MainDataType.Proverb[]>([]);
	const [page, setPage] = useState(1);
	const [showScrollTop, setShowScrollTop] = useState(false);

	const [fieldOpen, setFieldOpen] = useState(false);
	const [levelOpen, setLevelOpen] = useState(false);
	const [fieldValue, setFieldValue] = useState('Ï†ÑÏ≤¥');
	const [levelValue, setLevelValue] = useState('Ï†ÑÏ≤¥');
	const [selectedProverb, setSelectedProverb] = useState<MainDataType.Proverb | null>(null);
	const [showDetailModal, setShowDetailModal] = useState(false);

	const [fieldItems, setFieldItems] = useState([{ label: '', value: '' }]);
	const [levelItems, setLevelItems] = useState([{ label: '', value: '' }]);

	const fetchData = () => {
		const allData = ProverbServices.selectProverbList(); // Ïù¥ÎØ∏ ÌïÑÎìúÏóê ÏûàÏùå
		let filtered = [...allData];

		if (keyword.trim()) {
			const lowerKeyword = keyword.trim().toLowerCase();
			filtered = filtered.filter((item) => item.proverb?.toLowerCase().includes(lowerKeyword) || item.longMeaning?.toLowerCase().includes(lowerKeyword));
		}
		if (fieldValue !== 'Ï†ÑÏ≤¥') {
			filtered = filtered.filter((item) => item.category?.trim() === fieldValue);
		}
		if (levelValue !== 'Ï†ÑÏ≤¥') {
			filtered = filtered.filter((item) => item.levelName?.trim() === levelValue);
		}

		setProverbList(filtered);
		setPage(1);
		setVisibleList(filtered.slice(0, PAGE_SIZE));
	};

	// üîÑ ÌïÑÌÑ∞ Î≥ÄÍ≤Ω Ïãú Îç∞Ïù¥ÌÑ∞Îßå Îã§Ïãú Í∞ÄÏ†∏Ïò§Í∏∞
	useEffect(() => {
		fetchData();
	}, [keyword, fieldValue, levelValue]);

	// üîÑ ÌôîÎ©¥ Ìè¨Ïª§Ïä§ Ïãú ÏµúÏ¥à 1Ìöå Ï¥àÍ∏∞Ìôî (ÌïÑÌÑ∞ ÏÉÅÌÉúÎèÑ Î¶¨ÏÖã)
	useFocusEffect(
		useCallback(() => {
			handleReset(); // keyword, fieldValue Îì± Ï¥àÍ∏∞Ìôî
		}, []),
	);
	useFocusEffect(
		useCallback(() => {
			// ‚úÖ ÌïÑÌÑ∞ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
			setKeyword('');
			setFieldValue('Ï†ÑÏ≤¥');
			setLevelValue('Ï†ÑÏ≤¥');

			// ‚úÖ Î¶¨Ïä§Ìä∏ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
			setPage(1);
			setVisibleList([]);
			setProverbList([]);

			// ‚úÖ ÎìúÎ°≠Îã§Ïö¥ Ìï≠Î™© ÏÉàÎ°ú ÏÑ∏ÌåÖ
			const fieldList = ProverbServices.selectCategoryList();
			setFieldItems([{ label: 'Ï†ÑÏ≤¥', value: 'Ï†ÑÏ≤¥' }, ...fieldList.map((field) => ({ label: field, value: field }))]);

			const levelList = ProverbServices.selectLevelNameList();
			setLevelItems([{ label: 'Ï†ÑÏ≤¥', value: 'Ï†ÑÏ≤¥' }, ...levelList.map((level) => ({ label: level, value: level }))]);
			// ‚úÖ Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°ú Î∂àÎü¨Ïò§Í∏∞
			fetchData();
		}, []),
	);

	const onRefresh = () => {
		setRefreshing(true);
		fetchData();
		setRefreshing(false);
	};

	const loadMoreData = () => {
		const nextPage = page + 1;
		const start = (nextPage - 1) * PAGE_SIZE;
		const end = start + PAGE_SIZE;
		const newData = proverbList.slice(0, end);

		if (newData.length > visibleList.length) {
			setVisibleList(newData);
			setPage(nextPage);
		}
	};

	const scrollToTop = () => {
		scrollRef.current?.scrollToOffset({ animated: true, offset: 0 });
	};

	const getFieldColor = (field: string) => {
		const categoryColorMap: Record<string, string> = {
			'Ïö¥/Ïö∞Ïó∞': '#00cec9', // Ï≤≠Î°ù
			Ïù∏Í∞ÑÍ¥ÄÍ≥Ñ: '#6c5ce7', // Î≥¥Îùº
			'ÏÑ∏ÏÉÅ Ïù¥Ïπò': '#fdcb6e', // Ïó∞ÎÖ∏Îûë
			'Í∑ºÎ©¥/Í≤ÄÏÜå': '#e17055', // Ï£ºÌô©
			'ÎÖ∏Î†•/ÏÑ±Í≥µ': '#00b894', // ÏßôÏùÄ Ï≤≠Î°ù
			'Í≤ΩÍ≥Ñ/Ï°∞Ïã¨': '#d63031', // Îπ®Í∞ï
			'ÏöïÏã¨/ÌÉêÏöï': '#e84393', // Ìï´ÌïëÌÅ¨
			'Î∞∞Ïã†/Î∂àÏã†': '#2d3436', // ÏßôÏùÄ ÌöåÏÉâ
		};

		return categoryColorMap[field] || '#b2bec3'; // Í∏∞Î≥∏ ÌöåÏÉâ
	};
	const getLevelColor = (levelName: string) => {
		const levelColorMap: Record<string, string> = {
			'ÏïÑÏ£º Ïâ¨ÏõÄ': '#dfe6e9',
			Ïâ¨ÏõÄ: '#74b9ff',
			Î≥¥ÌÜµ: '#0984e3',
			Ïñ¥Î†§ÏõÄ: '#2d3436',
		};

		return levelColorMap[levelName] || '#b2bec3'; // Í∏∞Î≥∏ ÌöåÏÉâ
	};


	const handleReset = () => {
		// 1. ÎìúÎ°≠Îã§Ïö¥ÏùÑ Î®ºÏ†Ä Îã´Ïùå
		setFieldOpen(false);
		setLevelOpen(false);

		// 2. ÌÇ§Î≥¥Îìú Îã´Í∏∞
		Keyboard.dismiss();

		// 3. ÏïΩÍ∞ÑÏùò ÏßÄÏó∞ ÌõÑ Í∞í Ï¥àÍ∏∞Ìôî (Ìè¨Ïª§Ïã± Ïù¥Ïäà Î∞©ÏßÄ)
		setTimeout(() => {
			setKeyword('');
			setFieldValue('Ï†ÑÏ≤¥');
			setLevelValue('Ï†ÑÏ≤¥');

			// ÌïÑÌÑ∞ Î™©Î°ù Ï¥àÍ∏∞Ìôî
			const fieldList = ProverbServices.selectCategoryList();
			setFieldItems([{ label: 'Ï†ÑÏ≤¥', value: 'Ï†ÑÏ≤¥' }, ...fieldList.map((field) => ({ label: field, value: field }))]);

			const levelList = ProverbServices.selectLevelNameList();
			setLevelItems([{ label: 'Ï†ÑÏ≤¥', value: 'Ï†ÑÏ≤¥' }, ...levelList.map((level) => ({ label: level, value: level }))]);

			scrollToTop(); // Ïä§ÌÅ¨Î°§ Ïù¥ÎèôÏùÄ ÎßàÏßÄÎßâÏóê
		}, 50);
	};

	const handleSetLevelOpen = (open: boolean) => {
		setLevelOpen(open);
		if (open) scrollToTop();
	};

	const handleSetFieldOpen = (open: boolean) => {
		setFieldOpen(open);
		if (open) scrollToTop();
	};

	return (
		<SafeAreaView style={{ flex: 1, backgroundColor: '#f8f9fa' }} edges={['top']}>
			<TouchableWithoutFeedback style={{ flex: 1 }} onPress={Keyboard.dismiss}>
				<View style={{ flex: 1 }}>
					{/* ÌïÑÌÑ∞ + ÎìúÎ°≠Îã§Ïö¥ ÏòÅÏó≠ */}
					<View style={{ zIndex: 10, paddingHorizontal: 16, paddingTop: 16 }}>
						<View style={styles.filterCard}>
							<View style={styles.bannerContainer}>
								<AdmobBannerAd paramMarginBottom={8} />
							</View>
							<TextInput
								ref={searchInputRef}
								style={styles.input}
								placeholder='ÏÜçÎã¥Ïù¥ÎÇò ÏùòÎØ∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî'
								placeholderTextColor='#666'
								onChangeText={(text) => {
									setKeyword(text);
									setFieldOpen(false); // üîΩ ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
									setLevelOpen(false); // üîΩ ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
								}}
								value={keyword}
							/>
							<View style={styles.filterDropdownRow}>
								<View style={[styles.dropdownWrapper, { zIndex: fieldOpen ? 2000 : 1000 }]}>
									<DropDownPicker
										open={levelOpen}
										value={levelValue}
										items={LEVEL_DROPDOWN_ITEMS}
										setOpen={setLevelOpen}
										setValue={setLevelValue}
										setItems={setLevelItems}
										style={styles.dropdownLevel}
										dropDownContainerStyle={styles.dropdownListLevel}
										listItemLabelStyle={{ marginLeft: 6, fontSize: 14 }}
										labelStyle={{ fontSize: 14, color: '#2c3e50' }}
										iconContainerStyle={{ marginRight: 8 }}
										showArrowIcon={true} // ÎìúÎ°≠Îã§Ïö¥ ÌôîÏÇ¥Ìëú
										showTickIcon={false} // ÏÑ†ÌÉù Ïãú Ïò§Î•∏Ï™Ω Ï≤¥ÌÅ¨ ÌëúÏãú Ï†úÍ±∞
									/>
								</View>
								<View style={[styles.dropdownWrapperLast, { zIndex: levelOpen ? 2000 : 1000, overflow: 'visible' }]}>
									<DropDownPicker
										open={fieldOpen}
										value={fieldValue}
										items={FIELD_DROPDOWN_ITEMS}
										setOpen={setFieldOpen}
										setValue={setFieldValue}
										setItems={setFieldItems}
										listMode='SCROLLVIEW'
										scrollViewProps={{
											nestedScrollEnabled: true,
										}}
										style={styles.dropdownField}
										dropDownContainerStyle={{
											...styles.dropdownListField,
											elevation: 1000, // AndroidÏóêÏÑú zIndexÏ≤òÎüº ÎèôÏûë
										}}
										zIndex={5000} // DropDownPicker ÏûêÏ≤¥Ïóê zIndex Ï£ºÍ∏∞
										zIndexInverse={4000} // Îã§Î•∏ PickerÏôÄ Í≤πÏπòÏßÄ ÏïäÍ≤å
										containerStyle={{
											zIndex: 5000,
										}}
										listItemLabelStyle={{ marginLeft: 6, fontSize: 14 }}
										labelStyle={{ fontSize: 14, color: '#2c3e50' }}
										iconContainerStyle={{ marginRight: 8 }}
										showArrowIcon={true}
										showTickIcon={false}
									/>
								</View>

								{/* Ï¥àÍ∏∞Ìôî Î≤ÑÌäº */}
								<TouchableOpacity style={styles.resetButton} onPress={handleReset}>
									<Icon name='rotate-right' size={20} color='#555' />
								</TouchableOpacity>
							</View>
							{/* Î¶¨Ïä§Ìä∏ Í∞úÏàò ÌëúÏãú */}
							<View style={styles.listCountWrapper}>
								<Text style={styles.listCountText}>üîç Ï¥ù {proverbList.length}Í∞ú ÏÜçÎã¥Ïù¥ Í≤ÄÏÉâÎêòÏóàÏñ¥Ïöî!</Text>
							</View>
						</View>
					</View>

					{/* Î¶¨Ïä§Ìä∏ ÏòÅÏó≠ */}
					<View style={{ flex: 1, zIndex: 0 }}>
						<FlatList
							ref={scrollRef}
							data={visibleList}
							keyExtractor={(item) => item.id.toString()}
							refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}
							onEndReached={loadMoreData}
							onEndReachedThreshold={0.5}
							onScroll={(event) => {
								const offsetY = event.nativeEvent.contentOffset.y;
								setShowScrollTop(offsetY > 100);
							}}
							scrollEventThrottle={16}
							keyboardShouldPersistTaps='handled'
							ListEmptyComponent={() => (
								<View style={[styles.emptyWrapper, { height: '100%', marginTop: 40 }]}>
									<FastImage source={emptyImage} style={styles.emptyImage} resizeMode='contain' />
									<Text style={styles.emptyText}>Ïïó! Ï°∞Í±¥Ïóê ÎßûÎäî ÏÜçÎã¥Ïù¥ ÏóÜÏñ¥Ïöî.{'\n'}Îã§Î•∏ Í≤ÄÏÉâÏñ¥ÎÇò ÌïÑÌÑ∞Î•º ÏÇ¨Ïö©Ìï¥Î≥¥ÏÑ∏Ïöî!</Text>
								</View>
							)}
							contentContainerStyle={{
								paddingTop: 12, // ‚úÖ Ï†ÅÎãπÌïú Ïó¨Î∞±ÏúºÎ°ú Ï°∞Ï†ï
								paddingHorizontal: 16,
								paddingBottom: 60,
							}}
							renderItem={({ item, index }) => {
								const isLast = index === visibleList.length - 1;
								return (
									<TouchableOpacity
										style={[
											styles.itemBox,
											{ marginBottom: isLast ? 24 : 12 }, // ÎßàÏßÄÎßâÏùÄ Ï¢Ä Îçî ÌÅ¨Í≤å, Í∑∏ Ïô∏Îäî ÏùºÏ†ï
										]}
										onPress={() => {
											setSelectedProverb(item);
											setShowDetailModal(true);
										}}>
										<View style={styles.proverbBlock}>
											<View style={styles.badgeInlineRow}>
												<View style={[styles.badge, { backgroundColor: getLevelColor(item.levelName) }]}>
													<Text style={styles.badgeText}>{item.levelName}</Text>
												</View>
												<View style={[styles.badge, { backgroundColor: getFieldColor(item.category) }]}>
													<Text style={styles.badgeText}>{item.category}</Text>
												</View>
											</View>
											<Text style={styles.proverbTextMulti}>{item.proverb}</Text>
										</View>

										<Text style={styles.meaningText}>- {item.longMeaning}</Text>

										{Array.isArray(item.sameProverb) && item.sameProverb.filter((p) => p.trim()).length > 0 && (
											<View style={styles.sameProverbBox}>
												<Text style={styles.sameProverbTitle}>ÎπÑÏä∑Ìïú ÏÜçÎã¥</Text>
												{item.sameProverb
													.filter((p) => p.trim())
													.map((p, idx) => (
														<Text key={idx} style={styles.sameProverbText}>
															- {p}
														</Text>
													))}
											</View>
										)}
									</TouchableOpacity>
								);
							}}
						/>
					</View>

					{/* Ïä§ÌÅ¨Î°§ ÏµúÏÉÅÎã® Ïù¥Îèô Î≤ÑÌäº */}
					{showScrollTop && (
						<TouchableOpacity style={styles.scrollTopButton} onPress={scrollToTop}>
							<Icon name='arrow-up' size={20} color='#fff' />
						</TouchableOpacity>
					)}

					{/* ÏÉÅÏÑ∏ Î™®Îã¨ */}
					<Modal visible={showDetailModal} animationType='slide' transparent={true} onRequestClose={() => setShowDetailModal(false)}>
						<View style={styles.modalOverlay}>
							<View style={styles.modalContainer}>
								<View style={styles.modalHeader}>
									<Text style={styles.modalHeaderTitle}>ÏÜçÎã¥ ÏÉÅÏÑ∏</Text>
									<TouchableOpacity style={styles.modalCloseIcon} onPress={() => setShowDetailModal(false)}>
										<Icon name='xmark' size={20} color='#0984e3' />
									</TouchableOpacity>
								</View>

								{/* ‚úÖ Ïä§ÌÅ¨Î°§ Í∞ÄÎä•Ìïú ÏòÅÏó≠ */}
								<ScrollView contentContainerStyle={styles.modalBody}>
									{/* ÏÜçÎã¥ Î≥∏Î¨∏ ÌÅ¨Í≤å Í∞ïÏ°∞ */}

									{selectedProverb && (
										<>
											<View style={[styles.badgeRow, { marginBottom: 12 }]}>
												<View style={[styles.badge, { backgroundColor: getLevelColor(selectedProverb.levelName) }]}>
													<Text style={styles.badgeText}>{selectedProverb.levelName}</Text>
												</View>
												<View style={[styles.badge, { backgroundColor: getFieldColor(selectedProverb.category) }]}>
													<Text style={styles.badgeText}>{selectedProverb.category}</Text>
												</View>
											</View>
											<View style={styles.modalProverbBox}>
												<Text style={styles.modalProverbText}>{selectedProverb.proverb}</Text>
											</View>



											<View style={styles.modalSection}>
												<Text style={styles.modalLabel}>ÏùòÎØ∏</Text>
												<Text style={styles.modalText}>- {selectedProverb?.longMeaning}</Text>
											</View>

											<View style={styles.modalSection}>
												<Text style={styles.modalLabel}>ÏòàÏãú</Text>
												<Text style={styles.modalText}>- {selectedProverb?.example}</Text>
											</View>

											{Array.isArray(selectedProverb.sameProverb) && selectedProverb.sameProverb.filter((p) => p.trim()).length > 0 && (
												<View style={styles.modalSection}>
													<Text style={styles.modalLabel}>ÎπÑÏä∑Ìïú ÏÜçÎã¥</Text>
													{selectedProverb.sameProverb.map((p, idx) => (
														<Text key={idx} style={styles.modalText}>
															- {p}
														</Text>
													))}
												</View>
											)}
										</>
									)}
								</ScrollView>

								{/* ‚úÖ Îã´Í∏∞ Î≤ÑÌäºÏùÑ Î™®Îã¨ Îß® ÌïòÎã®Ïóê Í≥†Ï†ï */}
								<TouchableOpacity style={styles.modalCloseButton} onPress={() => setShowDetailModal(false)}>
									<Text style={styles.modalCloseButtonText}>Îã´Í∏∞</Text>
								</TouchableOpacity>
							</View>
						</View>
					</Modal>
				</View>
			</TouchableWithoutFeedback>
		</SafeAreaView>
	);
};

export default ProverbListScreen;

const styles = StyleSheet.create({
	filterCard: {
		backgroundColor: '#fff',
		padding: 16,
		borderRadius: 16,
		// marginBottom: 20, ‚ùå Ï†úÍ±∞ ÎòêÎäî Ï§ÑÏù¥Í∏∞
		marginBottom: 8, // ‚úÖ Ï§ÑÏù¥Í∏∞
		shadowColor: '#000',
		shadowOffset: { width: 0, height: 2 },
		shadowOpacity: 0.05,
		shadowRadius: 8,
	},
	input: {
		height: 44, // ÎìúÎ°≠Îã§Ïö¥Í≥º ÎòëÍ∞ôÏù¥!
		borderWidth: 1,
		borderColor: '#ccc',
		borderRadius: 8,
		fontSize: 16,
		paddingHorizontal: 12, // Ï¢åÏö∞ Ìå®Îî©Îßå
		paddingVertical: 0, // ÏúÑÏïÑÎûò Ìå®Îî© ÏóÜÏï†Ïïº ÎÜíÏù¥ Îî± ÎßûÏïÑ
		marginBottom: 12,
		textAlignVertical: 'center', // ÌÖçÏä§Ìä∏ ÏàòÏßÅ Ï§ëÏïô Ï†ïÎ†¨
	},
	filterRow: {
		flexDirection: 'row',
	},
	dropdown: {
		backgroundColor: '#fff',
		borderColor: '#ccc',
		height: 44,
	},
	scrollTopButton: {
		position: 'absolute',
		right: 20,
		bottom: 30,
		backgroundColor: '#3b5998',
		width: 48,
		height: 48,
		borderRadius: 24,
		alignItems: 'center',
		justifyContent: 'center',
	},
	itemBox: {
		backgroundColor: '#fff',
		padding: 20,
		borderRadius: 16,
		marginBottom: 16,
		borderWidth: 1,
		borderColor: '#eee',
		shadowColor: '#000',
		shadowOffset: { width: 0, height: 2 },
		shadowOpacity: 0.05,
		shadowRadius: 8,
	},
	modalContainer: {
		width: '90%',
		backgroundColor: '#fff',
		borderRadius: 20,
		overflow: 'hidden',
		maxHeight: '85%',
	},

	modalTitle: {
		fontSize: 20,
		fontWeight: 'bold',
		color: '#2d3436',
		flexShrink: 1,
	},

	modalBody: {
		paddingHorizontal: 20,
		paddingVertical: 16,
	},

	modalSection: {
		marginBottom: 16,
		backgroundColor: '#f9f9f9',
		padding: 12,
		borderRadius: 12,
		shadowColor: '#000',
		shadowOffset: { width: 0, height: 1 },
		shadowOpacity: 0.05,
		shadowRadius: 4,
	},

	modalLabel: {
		fontSize: 17,
		fontWeight: 'bold',
		color: '#0984e3',
		marginBottom: 6,
	},
	modalText: {
		fontSize: 15,
		color: '#2d3436',
		lineHeight: 24,
	},

	modalHighlightTitle: {
		fontSize: 14,
		fontWeight: 'bold',
		color: '#0984e3',
		marginBottom: 4,
	},
	modalHighlightText: {
		fontSize: 15,
		color: '#2d3436',
		lineHeight: 22,
	},

	modalCloseButton: {
		backgroundColor: '#0984e3',
		paddingVertical: 14,
		alignItems: 'center',
		borderBottomLeftRadius: 20,
		borderBottomRightRadius: 20,
	},
	modalCloseButtonText: {
		color: '#fff',
		fontSize: 16,
		fontWeight: 'bold',
	},
	proverbText: {
		fontSize: 18,
		fontWeight: 'bold',
		color: '#2d3436',
		marginBottom: 8,
	},
	meaningText: {
		fontSize: 15,
		color: '#2d3436',
		fontWeight: '400', // Í∞ïÏ°∞ Ï∂îÍ∞Ä
		lineHeight: 24,
		marginBottom: 12,
	},
	badgeRow: {
		flexDirection: 'row',
		gap: 8,
		justifyContent: "center",
	},
	badge: {
		paddingHorizontal: 10,
		paddingVertical: 4,
		borderRadius: 12,
		backgroundColor: '#f1f2f6', // Ïó∞Ìïú ÌöåÏÉâ Î∞∞Í≤Ω Ï∂îÍ∞Ä
	},
	badgeText: {
		color: '#fff',
		fontSize: 12,
		fontWeight: '600',
	},
	filterDropdownRow: {
		flexDirection: 'row',
		marginBottom: 8,
	},
	dropdownWrapper: {
		flex: 1,
		marginBottom: 6, // ‚úÖ Ïó¨Î∞± Ï°∞Ï†ï
		marginRight: 6, // ‚Üê ÎìúÎ°≠Îã§Ïö¥ Í∞ÑÏùò Í∞ÑÍ≤©
	},
	dropdownPlaceholder: {
		textAlign: 'center',
		color: '#999', // ÏÑ†ÌÉù Ï†Ñ Ïª¨Îü¨ÎèÑ Î∂ÄÎìúÎüΩÍ≤å
	},
	dropdownList: {
		backgroundColor: '#fff',
		borderColor: '#dfe6e9',
		borderWidth: 1.2,
		borderRadius: 12,
	},
	dropdownWrapperLast: {
		flex: 1,
		marginBottom: 6,
		marginRight: 6, // ‚úÖ Ï¥àÍ∏∞Ìôî Î≤ÑÌäºÍ≥º Ïó¨Î∞± Ï∂îÍ∞Ä!
	},
	listCountWrapper: {
		marginTop: 10,
		alignItems: 'flex-end', // ‚úÖ Ïò§Î•∏Ï™Ω Ï†ïÎ†¨
		paddingHorizontal: 16, // ‚úÖ ÏñëÏ™Ω Ïó¨Î∞± Ï∂îÍ∞Ä (Î¶¨Ïä§Ìä∏Îûë ÎßûÏ∂îÍ∏∞)
		marginBottom: 3,
	},
	listCountText: {
		fontSize: 14,
		color: '#666',
	},
	resetButton: {
		justifyContent: 'center',
		alignItems: 'center',
		backgroundColor: '#eee',
		height: 50,
		width: 44, // ‚úÖ Ï†ïÏÇ¨Í∞ÅÌòïÏúºÎ°ú ÌÜµÏùº
		borderRadius: 8,
	},
	resetButtonText: {
		color: '#555',
		fontSize: 14,
		fontWeight: 'bold',
	},
	modalOverlay: {
		flex: 1,
		backgroundColor: 'rgba(0,0,0,0.5)',
		justifyContent: 'center',
		alignItems: 'center',
	},
	emptyWrapper: {
		justifyContent: 'center',
		alignItems: 'center',
		paddingHorizontal: 20,
	},
	emptyImage: {
		width: 200,
		height: 200,
		marginBottom: 20,
	},
	emptyText: {
		fontSize: 16,
		color: '#636e72',
		textAlign: 'center',
		lineHeight: 22,
	},
	modalCloseIcon: {
		position: 'absolute',
		top: 16,
		right: 16,
		padding: 4,
		zIndex: 10,
	},
	modalHeader: {
		backgroundColor: '#fff',
		paddingVertical: 16,
		paddingHorizontal: 20,
		justifyContent: 'center',
		alignItems: 'center',
		position: 'relative',
	},

	modalProverbText: {
		fontSize: 20,
		fontWeight: 'bold',
		color: '#2d3436',
		textAlign: 'center',
		lineHeight: 30,
	},
	modalProverbBox: {
		backgroundColor: '#f1f2f6', // ÌöåÏÉâ Î∞∞Í≤Ω
		borderRadius: 12,
		paddingVertical: 16,
		paddingHorizontal: 20,
		marginBottom: 20,
		alignItems: 'center',
	},
	modalHeaderTitle: {
		fontSize: 22,
		marginTop: 5,
		fontWeight: 'bold',
		color: '#2d3436',
		textAlign: 'center',
	},
	bannerContainer: {
		backgroundColor: '#fff',
		alignItems: 'center',
		paddingVertical: 6,
		borderColor: '#ccc',
		zIndex: 999,
	},
	dropdownLevel: {
		backgroundColor: '#ffffff',
		borderColor: '#ccc',
		height: 44,
		paddingHorizontal: 12,
	},
	dropdownField: {
		backgroundColor: '#ffffff',
		borderColor: '#ccc',
		height: 44,
		paddingHorizontal: 12,
	},
	dropdownListLevel: {
		backgroundColor: '#ffffff',
		borderColor: '#ccc',
		borderWidth: 1,
		borderRadius: 12,
	},
	dropdownListField: {
		backgroundColor: '#ffffff',
		borderColor: '#ccc',
		borderWidth: 1,
		borderRadius: 12,
	},
	sameProverbBox: {
		marginTop: 10,
		padding: 10,
		backgroundColor: '#f4f6f8', // ÌöåÏÉâÌÜ§ÏúºÎ°ú Î≥ÄÍ≤Ω
		borderRadius: 10,
	},
	sameProverbTitle: {
		fontSize: 14,
		color: '#0984e3', // Îçî ÏßÑÌïú ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ
		fontWeight: '600',
		marginBottom: 6,
	},

	sameProverbText: {
		fontSize: 13,
		color: '#34495e', // Îçî ÏßÑÌïú ÌöåÏÉâ
		fontWeight: '500', // Í∏∞Ï°¥Î≥¥Îã§ Îçî Í∞ïÏ°∞
		lineHeight: 22,
	},
	modalHighlightBox: {
		backgroundColor: '#f1f8ff',
		borderLeftWidth: 4,
		borderLeftColor: '#0984e3',
		padding: 12,
		borderRadius: 10,
		marginBottom: 16,
		marginTop: 12, // üëà Í∞ÑÍ≤© Ï∂îÍ∞Ä
	},
	proverbRow: {
		flexDirection: 'row',
		alignItems: 'center',
		justifyContent: 'space-between',
		marginBottom: 6,
	},

	proverbTextSingle: {
		fontSize: 16,
		fontWeight: 'bold',
		color: '#2d3436',
		flex: 1,
		marginRight: 8,
	},
	badgeInlineRow: {
		flexDirection: 'row',
		flexShrink: 0,
		gap: 6,
		marginBottom: 10,
	},
	proverbBlock: {
		marginBottom: 6,
	},

	proverbTextMulti: {
		fontSize: 18, // Í∏∞Ï°¥ 16 ‚Üí 18Î°ú ÌÇ§ÏõÄ
		fontWeight: 'bold',
		color: '#2d3436',
		lineHeight: 26, // Îçî ÎÑìÏùÄ Ï§Ñ Í∞ÑÍ≤©
		marginBottom: 8, // Î±ÉÏßÄÏôÄ Í∞ÑÍ≤© ÌôïÎ≥¥
	},
	// Î™®Îã¨ ÏòÅÏó≠ÏóêÏÑú ÏÇ¨Ïö©ÌïòÎäî Ïä§ÌÉÄÏùº Î≥µÍµ¨
	sameProverbBoxModal: {
		marginTop: 10,
		padding: 12,
		backgroundColor: '#eaf6ff', // Î∞ùÏùÄ ÌååÎûë ÏõêÎûòÍ∞í
		borderRadius: 12,
		borderWidth: 1,
		borderColor: '#d0eaff',
	},
	sameProverbTitleModal: {
		fontSize: 13,
		color: '#2980b9', // ÌååÎûÄ Í∞ïÏ°∞
		fontWeight: '700',
		marginBottom: 6,
	},
	sameProverbTextModal: {
		fontSize: 13,
		color: '#34495e',
		paddingVertical: 2,
		paddingLeft: 10,
	},
});
